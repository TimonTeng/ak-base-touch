!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var i=t("jquery"),n=t("lodash"),s=t("backbone"),r=t("backbone.view"),o=t("template");return e(i,n,s,r,o)}):define.cmd&&define(function(t,i,n){var s=t("jquery"),r=t("lodash"),o=t("backbone"),a=t("backbone.view"),h=t("template");return e(s,r,o,a,h)}):t.scrollView=e(t.scrollView)}(this,function(t,e,i,n,s){"use strict";function r(){this.id=this.level=this.title=this.returnIcon=null,this.$body=this.$header=this.$context=this.$left=this.$right=this.$title=null,this.view=this.parentView=null}r.prototype.assembly=function(){var e=this;this.setActivateOff(),this.$header.appendTo(this.$body),this.$context.appendTo(this.$body),this.$body.appendTo(document.body),this.style&&this.$body.css(this.style),t(this.$left).click(function(){e.close()}),t(this.$right).click(function(){e.submit()})},r.prototype.createContext=function(){this.$context=t("<div>",{id:"am-plugin-sidebar-context"+this.id,"class":"am-plugin-sidebar-context"})},r.prototype.createBody=function(){this.$body=t("<div>",{"class":"am-plugin-sidebar"})},r.prototype.createHeader=function(){this.$return_i=t("<i>",{"class":""+this.returnIcon}),this.$left=t("<div>",{"class":"am-plugin-sidebar-header-left"}),this.$return_i.appendTo(this.$left),this.$right=t("<div>",{"class":"am-plugin-sidebar-header-right"}),this.$right.text("确定"),this.$title=t("<h1>",{"class":"am-plugin-sidebar-header-title"}),this.$title.text(this.title),this.$header=t("<header>",{"class":"am-plugin-sidebar-header"}),this.$left.appendTo(this.$header),this.$right.appendTo(this.$header),this.$title.appendTo(this.$header)},r.prototype.initConfiguration=function(t){this.view=t,this.title=t.getAttr("title"),this.level=t.getAttr("level"),this.returnIcon=t.getAttr("returnIcon"),this.style=t.getAttr("style"),this.parentView=t.getAttr("parentView"),this.id=t.getAttr("id")?"-"+t.getAttr("id"):"",this.createBody(),this.createHeader(),this.createContext(),this.assembly()},r.prototype.setTitle=function(t){this.$title.text(t)},r.prototype.setActivateOn=function(){var t={"transition-duration":".2s","transition-timing-function":"linear",transform:"translate(0px, 0px)"};this.$body.css(t)},r.prototype.setActivateOff=function(){var t=document.body.clientWidth,e={"transition-duration":".2s","transition-timing-function":"linear",transform:"translate("+t+"px, 0px)"};this.$body.css(e)},r.prototype.open=function(){var t=this;this.$body.css("display","block");var e=setTimeout(function(){t.setActivateOn(),clearTimeout(e)},100)},r.prototype.close=function(){var t=this;this.setActivateOff(),setTimeout(function(){t.$body.css("display","none")},200)},r.prototype.submit=function(){var t=this,e=t.view.getAttr("submit");if(e){e();var i=this.parentView||null,n=i?i.getAttr("returnAfter"):null;i&&n&&n()}this.close()},r.prototype.hide=function(){};var o=i.Model.extend({idAttribute:"",defaults:{}});return n.extend({id:"",model:new o,attrs:{parentNode:null},events:{},setup:function(){var t=this,e=(t.getAttr("parentNode"),new r);e.initConfiguration(t),t.setAttr("sidebar",e),document.addEventListener("touchmove",function(t){t.preventDefault()},!1)},open:function(){var t=this.getAttr("sidebar");t.open()},submit:function(){},hide:function(){},appendHtml:function(t){var e=this.getAttr("sidebar");e.$context.append(t)},html:function(t){var e=this.getAttr("sidebar");e.$context.html(t)},setTitle:function(t){var e=this.getAttr("sidebar");e.setTitle(t)}})});