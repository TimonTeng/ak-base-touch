!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var i=t("jquery"),n=t("lodash"),r=t("backbone"),o=t("backbone.view"),a=t("template");return e(i,n,r,o,a)}):define.cmd&&define(function(t,i,n){var r=t("jquery"),o=t("lodash"),a=t("backbone"),s=t("backbone.view"),c=t("template");return e(r,o,a,s,c)}):t.scrollView=e(t.scrollView)}(this,function(t,e,i,n,r){"use strict";function o(){this.url=this.view=null,this.$title=this.$body=this.$frame=null,this.callbackObject={},this.triggerCallbackObject=null}o.prototype.assembly=function(){this.close(),this.$frame.appendTo(this.$body),this.$body.appendTo(document.body),this.style&&this.$body.css(this.style)},o.prototype.createBody=function(){this.$body=t("<div>",{"class":"am-plugin-sidebar"})},o.prototype.createFrame=function(){this.$frame=t("<iframe>",{id:"side-frame-view",width:"100%",height:"100%",scrolling:"no"})},o.prototype.initConfiguration=function(t){this.view=t,this.title=t.getAttr("title"),this.style=t.getAttr("style")||{},this.url=t.getAttr("url"),this.createBody(),this.createFrame(),this.assembly()},o.prototype.openUrl=function(t){var e=this,t=t||this.url;this.$frame.get(0).onload=function(){e.open();var t=setInterval(function(){e.$frame.get(0).contentWindow.document.parentWindow||(e.$frame.get(0).contentWindow.document.parentWindow=window,window.SideFrameView=e,clearInterval(t))},500)},t=-1!=t.indexOf("?")?t+"&v="+Math.random():t+"?v="+Math.random(),this.$frame.attr("src",t)},o.prototype.bindClose=function(e){var i=this;t(e).bind("touchend",function(){i.executeTrigger(),i.close()})},o.prototype.open=function(){var t=this,e={display:"block","transition-duration":".2s","transition-timing-function":"linear",transform:"translate(0px, 0px)"};this.$body.css("display","block");var i=setTimeout(function(){t.$body.css(e),clearTimeout(i)},100)},o.prototype.close=function(){var t=this;this.$frame.get(0).onload=null;var e=document.body.clientWidth,i={"transition-duration":".2s","transition-timing-function":"linear",transform:"translate("+e+"px, 0px)"};this.$body.css(i);var n=setTimeout(function(){t.$body.css("display","none"),clearTimeout(n)},500)},o.prototype.registerCallback=function(t,e){this.callbackObject[t]=e,console.log("SideFrameView.prototype.registerCallback")},o.prototype.triggerCallback=function(t){this.triggerCallbackObject=this.callbackObject[t]},o.prototype.executeTrigger=function(){this.triggerCallbackObject&&this.triggerCallbackObject()};var a=i.Model.extend({idAttribute:"",defaults:{}});return n.extend({id:"",model:new a,attrs:{parentNode:null},events:{},setup:function(){var t=this,e=new o;e.initConfiguration(t),t.setAttr("sideFrameView",e),document.addEventListener("touchmove",function(t){t.preventDefault()},!1)},registerCallback:function(t,e){var i=this.getAttr("sideFrameView");i.registerCallback(t,e)},triggerCallback:function(t){var e=this.getAttr("sideFrameView");e.triggerCallback(t)},openUrl:function(t,e){var i=this.getAttr("sideFrameView");i.openUrl(t),e&&i.triggerCallback(e)}})});