!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var i=t("jquery"),o=t("lodash"),r=t("backbone"),n=t("backbone.view"),s=t("sidebar"),d=t("template");return e(i,o,r,n,d,s)}):define.cmd&&define(function(t,i,o){var r=t("jquery"),n=t("lodash"),s=t("backbone"),d=t("backbone.view"),a=t("sidebar"),c=t("template");return e(r,n,s,d,c,a)}):t.scrollView=e(t.scrollView)}(this,function(t,e,i,o,r,n){"use strict";function s(){this.state=this.touchTargetId=this.view=this.sideView=this.view=this.data=this.formObject=this.title=this.template=this.selectFields=null,this.sideSelectView=null,this.$touchEl=this.$context=this.$form=null,this.delegatesEvents={}}var d={ADD:"add",EDIT:"edit",INFO:"info"};s.prototype.initConfiguration=function(t){this.view=t,this.title=t.getAttr("title")||null,this.data=t.getAttr("data")||[],this.touchTargetId=t.getAttr("touchTargetId")||null,this.template=t.getAttr("template")||null,this.sideSelectView=t.getAttr("sideSelectView")||null,this.delegatesEvents.onSubmit=t.getAttr("onSubmit")||void 0,this.delegatesEvents.onloadAfter=t.getAttr("onloadAfter")||void 0,this.initFormView()},s.prototype.touchEvent=function(e,i,o){t.touchEvent(e,i,o)},s.prototype.initFormView=function(){this.createSiderView(),this.createFormEl()},s.prototype.createSiderView=function(){var t=this;this.sideView=new n({title:"",returnIcon:"icon_return",style:{zIndex:3129},submit:function(){var e=t.serializeForm();t.delegatesEvents.onSubmit(e)}});var e=this.sideView.getAttr("sidebar");this.$context=e.$context},s.prototype.createFormEl=function(){this.$form=t("<form>",{method:"post",name:"side-form",id:"side-form"}),this.$form.appendTo(this.$context)},s.prototype.renderForm=function(){var t=this.template,e=this.formObject,i=r.compile(t,this.formObject);this.$form.empty(),this.$form.append(i),this.sideSelectView&&this.sideSelectView.initSideSelectConfigs(),this.delegatesEvents.onloadAfter&&this.delegatesEvents.onloadAfter(e)},s.prototype.serializeForm=function(){var e=t(this.$form).serializeJson(),i=this.formObject||{};return t.extend(i,e),i},s.prototype.loadForm=function(t){this.state=d.EDIT,this.formObject=t,this.sideView.setTitle(this.title.edit),this.renderForm(),this.sideView.open()},s.prototype.loadNewForm=function(){this.state=d.ADD,this.formObject={},this.sideView.setTitle(this.title.add),this.renderForm(),this.sideView.open()},s.prototype.getState=function(){return this.state||d.INFO},s.prototype.correctView=function(){this.sideView.correctView()};var a=i.Model.extend({idAttribute:"",defaults:{}});return o.extend({id:"",model:new a,attrs:{parentNode:null},events:{},loadForm:function(t){var e=this.getAttr("sideFormView");e.loadForm(t)},loadNewForm:function(){var t=this.getAttr("sideFormView");t.loadNewForm()},correctView:function(){var t=this.getAttr("sideFormView");t.correctView()},getState:function(){var t=this.getAttr("sideFormView");return t.getState()},onload:function(){},setup:function(){var t=this,e=new s;e.initConfiguration(t),t.setAttr("sideFormView",e),document.addEventListener("touchmove",function(t){t.preventDefault()},!1)}})});