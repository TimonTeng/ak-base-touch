!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var i=t("jquery"),o=t("lodash"),n=t("backbone"),s=t("backbone.view"),r=t("sidebar"),d=t("template");return e(i,o,n,s,d,r)}):define.cmd&&define(function(t,i,o){var n=t("jquery"),s=t("lodash"),r=t("backbone"),d=t("backbone.view"),a=t("sidebar"),h=t("template");return e(n,s,r,d,h,a)}):t.scrollView=e(t.scrollView)}(this,function(t,e,i,o,n,s){"use strict";function r(){this.state=this.touchTargetId=this.view=this.sideView=this.view=this.data=this.formObject=this.title=this.template=this.selectFields=null,this.sideSelectView=null,this.$touchEl=this.$context=this.$form=null,this.delegatesEvents={}}var d={ADD:"add",EDIT:"edit",INFO:"info"};r.prototype.initConfiguration=function(t){this.view=t,this.title=t.getAttr("title")||null,this.data=t.getAttr("data")||[],this.touchTargetId=t.getAttr("touchTargetId")||null,this.template=t.getAttr("template")||null,this.sideSelectView=t.getAttr("sideSelectView")||null,this.delegatesEvents.onSubmit=t.getAttr("onSubmit")||void 0,this.delegatesEvents.onloadAfter=t.getAttr("onloadAfter")||void 0,this.initFormView()},r.prototype.touchEvent=function(e,i,o){var n=i||document.body,s=!1;t(e,n).unbind("touchstart").bind("touchstart",function(t){s=!0,o.start(t)}),t(e,n).unbind("touchmove").bind("touchmove",function(t){s=!1,o.move(t)}),t(e,n).unbind("touchend").bind("touchend",function(t){s&&o.end(t)})},r.prototype.initFormView=function(){this.createSiderView(),this.createFormEl()},r.prototype.createSiderView=function(){var t=this;this.sideView=new s({title:"",returnIcon:"icon_return",style:{zIndex:3129},submit:function(){var e=t.serializeForm();t.delegatesEvents.onSubmit(e)}});var e=this.sideView.getAttr("sidebar");this.$context=e.$context},r.prototype.createFormEl=function(){this.$form=t("<form>",{method:"post",name:"side-form",id:"side-form"}),this.$form.appendTo(this.$context)},r.prototype.renderForm=function(){var t=this.template,e=this.formObject,i=n.compile(t,this.formObject);this.$form.empty(),this.$form.append(i),this.sideSelectView&&this.sideSelectView.initSideSelectConfigs(),this.delegatesEvents.onloadAfter&&this.delegatesEvents.onloadAfter(e)},r.prototype.serializeForm=function(){var e=t(this.$form).serializeJson(),i=this.formObject||{};return t.extend(i,e),i},r.prototype.loadForm=function(t){this.state=d.EDIT,this.formObject=t,this.sideView.setTitle(this.title.edit),this.renderForm(),this.sideView.open()},r.prototype.loadNewForm=function(){this.state=d.ADD,this.formObject={},this.sideView.setTitle(this.title.add),this.renderForm(),this.sideView.open()},r.prototype.getState=function(){return this.state||d.INFO};var a=i.Model.extend({idAttribute:"",defaults:{}});return o.extend({id:"",model:new a,attrs:{parentNode:null},events:{},loadForm:function(t){var e=this.getAttr("sideFormView");e.loadForm(t)},loadNewForm:function(){var t=this.getAttr("sideFormView");t.loadNewForm()},getState:function(){var t=this.getAttr("sideFormView");return t.getState()},onload:function(){},setup:function(){var t=this,e=new r;e.initConfiguration(t),t.setAttr("sideFormView",e),document.addEventListener("touchmove",function(t){t.preventDefault()},!1)}})});