!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var o=t("jquery"),a=t("lodash"),r=t("backbone"),i=t("backbone.view"),n=t("template"),l=t("alphabetBar");return e(o,a,r,i,n,l)}):define.cmd&&define(function(t,o,a){var r=t("jquery"),i=t("lodash"),n=t("backbone"),l=t("backbone.view"),s=t("template"),c=t("alphabetBar");return e(r,i,n,l,s,c)}):t.ActionBar=e(t.ActionBar)}(this,function(t,e,o,a,r,i){"use strict";function n(){this.view=null}var l={DataType:{Remote:"remote",Local:"local",Compose:"compose"}},s=o.Model.extend({idAttribute:"ActionBar",defaults:{apiUrl:"",actions:[{id:"",title:"",condition:"",type:"",url:""}]}}),c=function(e){this.attr=e,this.root=t("<div>",{id:e.id,"class":e["class"]}),this.selectedContext=t("<div>",{id:e.id+"_context"}),this.selectedContext.appendTo(this.root),this.config=this.view=this.store=this.displayField=this.result=null,this.lazyLoad=!0;var o=this;this.clearSelectedContext=function(){o.selectedContext.html("")},this.dataType=l.DataType.Remote,this.setDataType=function(t){t&&(this.dataType=t)},this.setStore=function(t){t&&(o.store=t)},this.setDisplayField=function(t){if(!t)throw Error("displayField can't not null");this.displayField=t},this.setResult=function(t){if((this.DataType==l.DataType.Remote||this.DataType==l.DataType.Compose)&&!t)throw Error("result can't not null");this.result=t}};c.prototype.initConfiguration=function(t,e){var o=this;o.config=t,o.view=e,o.lazyLoad=new Boolean(e.getAttr("lazyLoad")||o.lazyLoad),o.setDataType(t.dataType),o.setResult(t.result),o.setStore(t.store),o.setDisplayField(t.displayField)},c.prototype.displaySetting=function(e){var o=t(e).height()-this.attr.offset;this.root.css({height:o})},c.prototype.selectedAllOff=function(){t(".warp_context li",this.selectedContext).css("backgroundColor","#fff"),t(".warp_context li",this.selectedContext).data("select",!1),this.data=null},c.prototype.selectedOn=function(e){t(e).css("backgroundColor","#ececec"),t(e).data("select",!0),this.data=t(e).data("object")},c.prototype.selectedOff=function(e){t(".warp_context li",this.selectedContext).css("backgroundColor","#fff"),t(e).data("select",!1),this.data=null},c.prototype.renderAfter=function(){var e=this;this.rootIScroll=new IScroll("#"+this.attr.id,{click:!0}),this.view.iscrolls.push(this.rootIScroll),t.touchEvent(".warp_context li",this.selectContext,{start:function(t){e.selectedAllOff(),e.selectedOn(t.target)},move:function(t){e.selectedOff(t.target)},end:function(t){}})},c.prototype.loadRemoteData=function(){var e=this,o=e.config.url;t.getJSON(o+"?ver="+new Date,null,function(o){var a=o[e.result];if(a){var r=t("<div>",{id:"warp_root","class":"warp_mark"}),i=t("<ul>",{id:"warp_ul_root","class":"warp_context"});i.appendTo(r);for(var n=0;n<a.length;n++){var l=a[n];l.dataType=e.dataType;var s=t("<li>",{"data-object":JSON.stringify(l),"data-select":!1});s.text(l[e.displayField]),s.appendTo(i)}r.appendTo(e.selectedContext),e.renderAfter()}}).error(function(){console.log("Ajax Request Error!")})},c.prototype.loadLocalData=function(){var e=this;if(e.store){var o=t("<div>",{id:"warp_root","class":"warp_mark"}),a=t("<ul>",{id:"warp_ul_root","class":"warp_context"});a.appendTo(o);for(var r=0;r<e.store.length;r++){var i=e.store[r];i.dataType=e.dataType;var n=t("<li>",{"data-object":JSON.stringify(i),"data-select":!1});n.text(i[e.displayField]),n.appendTo(a)}o.appendTo(e.selectedContext),e.renderAfter()}},c.prototype.loadComposeData=function(){var e=this;if(e.store){var o=t("<div>",{id:"warp_root","class":"warp_mark"}),a=t("<ul>",{id:"warp_ul_root","class":"warp_context"});a.appendTo(o);for(var r=0;r<e.store.length;r++){var i=e.store[r];i.dataType=l.DataType.Local;var n=t("<li>",{"data-object":JSON.stringify(i),"data-select":!1});n.text(i[e.displayField]),n.appendTo(a)}var s=e.config.url;t.getJSON(s+"?ver="+new Date,null,function(r){var i=r[e.result];if(i)for(var n=0;n<i.length;n++){var s=i[n];s.dataType=l.DataType.Compose;var c=t("<li>",{"data-object":JSON.stringify(s),"data-select":!1});c.text(s[e.displayField]),c.appendTo(a)}o.appendTo(e.selectedContext),e.renderAfter()}).error(function(){console.log("Ajax Request Error!")})}},c.prototype.onloadData=function(){var t=this;switch(t.dataType){case l.DataType.Remote:t.loadRemoteData();break;case l.DataType.Local:t.loadLocalData();break;case l.DataType.Compose:t.loadComposeData()}};var d=function(e){this.attr=e,this.root=t("<div>",{id:"double-select-view"}),this.leftSelectView=new c({id:"left","class":"am-plugin-actionbar-container-l",offset:e.offset}),this.rightSelectView=new c({id:"right","class":"am-plugin-actionbar-container-r",offset:e.offset}),this.leftSelectView.root.appendTo(this.root),this.rightSelectView.root.appendTo(this.root),this.view=null,this.config=this.store=this.result=null,this.dataType=l.DataType.Remote,this.lazyLoad=!0,this.setDataType=function(t){t&&(this.dataType=t)},this.setStore=function(t){t&&(o.store=t)};var o=this;this.clearSelectedContext=function(){o.leftSelectView.clearSelectedContext(),o.rightSelectView.clearSelectedContext()},this.setResult=function(t){if((this.DataType==l.DataType.Remote||this.DataType==l.DataType.Compose)&&!t)throw Error("result can't not null");this.result=t}};d.prototype.initConfiguration=function(t,e){var o=this;o.config=t,o.view=e,o.url=t.url,o.setDataType(t.dataType),o.setResult(t.result),o.setStore(t.store)},d.prototype.displaySetting=function(e){var o=t(e).height()-this.attr.offset;this.leftSelectView.root.css({height:o}),this.rightSelectView.root.css({height:o})},d.prototype.selectedAllOff=function(e){t("li",e).css("backgroundColor","#fff"),t("li",e).data("select",!1),this.data=null,this.nodeData=null},d.prototype.selectedOn=function(e){return t(e).css("backgroundColor","#ececec"),t(e).data("select",!0),t(e).data("object")},d.prototype.selectedOff=function(e,o){return t("li",o).css("backgroundColor","#fff"),t(e).data("select",!1),null},d.prototype.renderAfter=function(){var e=this;this.rootIScroll=new IScroll("#"+e.leftSelectView.attr.id,{click:!0}),this.view.iscrolls.push(this.rootIScroll),t.touchEvent("[data-object]","#warp_ul_root",{start:function(t){e.selectedAllOff("#warp_ul_root"),e.data=e.selectedOn(t.target,e.data)},move:function(t){e.data=e.selectedOff(t.target,"#warp_ul_root")},end:function(t){e.onloadNodeData(e.data.dataType)}})},d.prototype.renderNodeAfter=function(){var e=this;this.nodeIScroll=new IScroll("#"+this.rightSelectView.attr.id,{click:!0}),this.view.iscrolls.push(this.nodeIScroll),t.touchEvent("[data-object]","#warp_ul_node",{start:function(t){e.selectedAllOff("#warp_ul_node"),e.nodeData=e.selectedOn(t.target)},move:function(t){e.nodeData=e.selectedOff(t.target,"#warp_ul_node")},end:function(t){}})},d.prototype.onSwipe=function(){var e=this;t("li",e.leftSelectView.selectedContext).swipe({swipeStatus:function(e,o,a,r,i,n){if("move"==o){var l=t(e.target).data("select");l&&(t(e.target).data("select",!1),t(e.target).css("backgroupColor","#fff"))}},threshold:0,maxTimeThreshold:6e4,fingers:t.fn.swipe.fingers.ALL})},d.prototype.formatNodeApiUrl=function(){var t=this.config.url.node;this.nodeUrl=t.apiUrl,this.rootPropertys=t.rootPropertys;for(var e="?",o=0;o<t.rootPropertys.length;o++)for(var a in t.rootPropertys[o])e+="&"+a+"={"+a+"}";this.nodeUrl+=e},d.prototype.onloadData=function(){this.onloadRootData()},d.prototype.onloadRootData=function(){var t=this;switch(t.dataType){case l.DataType.Remote:t.onloadRootRemoteData();break;case l.DataType.Local:t.onloadRootLocalData();break;case l.DataType.Compose:t.onloadRootComposeData()}},d.prototype.onloadRootRemoteData=function(){var e=this,o=null;e.url&&"string"==typeof e.url&&(o=e.url),e.url&&"object"==typeof e.url&&(o=e.url.root.apiUrl),t.getJSON(o,null,function(o){var a=o[e.result],r=t("<div>",{id:"warp_root","class":"warp_mark"}),i=t("<ul>",{id:"warp_ul_root","class":"warp_context"});if(i.appendTo(r),!a)return r.appendTo(e.leftSelectView.selectedContext),void e.renderAfter();for(var n=0;n<a.length;n++){var s=a[n];s.dataType=l.DataType.Remote;var c=t("<li>",{"data-object":JSON.stringify(s),"data-select":!1});c.text(s[e.url.root.displayField]),c.appendTo(i)}r.appendTo(e.leftSelectView.selectedContext),e.formatNodeApiUrl(),e.renderAfter()}).error(function(){console.log("Ajax Request Error!")})},d.prototype.onloadRootLocalData=function(){var e=this,o=t("<div>",{id:"warp_root","class":"warp_mark"}),a=t("<ul>",{id:"warp_ul_root","class":"warp_context"});if(a.appendTo(o),!e.url.root.displayField)throw Error("url.root.displayField can't not null");if(!e.store)throw Error("ListView store can't not null");for(var r=0;r<e.store.length;r++){var i=e.store[r];i.dataType=l.DataType.Local;var n=t("<li>",{"data-object":JSON.stringify(i),"data-select":!1});n.text(i[e.url.root.displayField]),n.appendTo(a)}o.appendTo(e.leftSelectView.selectedContext),e.renderAfter()},d.prototype.onloadRootComposeData=function(){var e=this,o=t("<div>",{id:"warp_root","class":"warp_mark"}),a=t("<ul>",{id:"warp_ul_root","class":"warp_context"});if(a.appendTo(o),e.store&&e.store.length>0)for(var r=0;r<e.store.length;r++){var i=e.store[r];i.dataType=l.DataType.Local;var n=t("<li>",{"data-object":JSON.stringify(i),"data-select":!1});n.text(i[e.url.root.displayField]),n.appendTo(a)}var s=null;e.url&&"string"==typeof e.url&&(s=e.url),e.url&&"object"==typeof e.url&&(s=e.url.root.apiUrl),t.getJSON(s,null,function(r){if(!r||!r[e.result])return o.appendTo(e.leftSelectView.selectedContext),void e.renderAfter();for(var i=r[e.result],n=0;n<i.length;n++){var s=i[n];s.dataType=l.DataType.Remote;var c=t("<li>",{"data-object":JSON.stringify(s),"data-select":!1});c.text(s[e.url.root.displayField]),c.appendTo(a)}o.appendTo(e.leftSelectView.selectedContext),e.formatNodeApiUrl(),e.renderAfter()}).error(function(){console.log("Ajax Request Error!")})},d.prototype.onloadNodeData=function(t){var e=this;switch(t){case l.DataType.Remote:e.onloadNodeRemoteData();break;case l.DataType.Local:e.onloadNodeLocalData();break;case l.DataType.Compose:e.onloadNodeComposeData()}},d.prototype.onloadNodeRemoteData=function(){var e=this;e.rightSelectView.selectedContext.html("");for(var o=this.nodeUrl+"",a=0;a<this.rootPropertys.length;a++)for(var r in this.rootPropertys[a])o=o.replace("{"+r+"}",this.data[this.rootPropertys[a][r]]);t.getJSON(o,null,function(o){var a=o[e.result],r=t("<div>",{id:"warp_node","class":"warp_mark"}),i=t("<ul>",{id:"warp_ul_node","class":"warp_context"}),n=t("<li>",{"data-object":"all","data-select":!0});n.text("全部"),n.css("backgroundColor","#ececec"),n.appendTo(i),i.appendTo(r);for(var l=0;l<a.length;l++){var s=a[l],c=t("<li>",{"data-object":JSON.stringify(s),"data-select":!1});c.text(s[e.url.node.displayField]),c.appendTo(i)}r.appendTo(e.rightSelectView.selectedContext),e.renderNodeAfter()}).error(function(){console.log("Ajax Request Error!")})},d.prototype.onloadNodeLocalData=function(){var e=this;e.rightSelectView.selectedContext.html("");var o=e.data,a=o.nodes;if(a&&0!=a.length){var r=t("<div>",{id:"warp_node","class":"warp_mark"}),i=t("<ul>",{id:"warp_ul_node","class":"warp_context"}),n=t("<li>",{"data-object":"all","data-select":!0});n.text("全部"),n.css("backgroundColor","#ececec"),n.appendTo(i),i.appendTo(r);for(var l=0;l<a.length;l++){var s=a[l],c=t("<li>",{"data-object":JSON.stringify(s),"data-select":!1});c.text(s[e.url.node.displayField]),c.appendTo(i)}r.appendTo(e.rightSelectView.selectedContext),e.renderNodeAfter()}};var p=function(t){var e=new c(t);this.attr=t,this.root=e.root,this.selectedContext=e.selectedContext,this.view=null,this.config=null;var o=this;this.clearSelectedContext=function(){o.selectedContext.html("")}};p.prototype.displaySetting=function(e){var o=t(e).height()-this.attr.offset;this.root.css({height:o});var a=this.aplhabetBar.alphabetBarView;a.renderTo(e,o)},p.prototype.setAplhabetBar=function(t){this.aplhabetBar=t,this.aplhabetBar.alphabetBarView.bindSelectView(this)},p.prototype.selectedAllOff=function(){t(".warp_context li",this.selectedContext).css("backgroundColor","#fff"),t(".warp_context li",this.selectedContext).data("select",!1),this.data=null},p.prototype.selectedOn=function(e){t(e).css("backgroundColor","#ececec"),t(e).data("select",!0),this.data=t(e).data("object")},p.prototype.selectedOff=function(e){t(".warp_context li",this.selectedContext).css("backgroundColor","#fff"),t(e).data("select",!1),this.data=null},p.prototype.renderAfter=function(){var e=this;this.rootIScroll=new IScroll("#"+this.attr.id,{click:!0}),this.view.iscrolls.push(this.rootIScroll),t.touchEvent(".warp_context li",this.selectContext,{start:function(t){e.selectedAllOff(),e.selectedOn(t.target)},move:function(t){e.selectedOff(t.target)},end:function(t){}})},p.prototype.onloadData=function(){var e=this,o=e.config.url;t.getJSON(o+"?ver="+new Date,null,function(o){for(var a=0;a<o.form.length;a++){var r=t("<div>",{id:"warp_alphabet_"+o.form[a].code,"class":"warp_alphabet_mark"}),i=t("<div class='warp_alphabet_title'><li><h2>"+o.form[a].code+"</h2></li></div>");t(i).appendTo(r);var n=t("<ul>",{id:"warp_u_"+o.form[a].code,"class":"warp_context"});if(o.form[a].p2pcb)for(var l=0;l<o.form[a].p2pcb.length;l++){var s=t("<li>",{"data-object":JSON.stringify(o.form[a].p2pcb[l]),"data-select":!1});s.text(o.form[a].p2pcb[l].name),s.appendTo(n)}t(n).appendTo(r),t(r).appendTo(e.selectedContext)}t.each(t(".warp_alphabet_mark"),function(){t(this).attr("data-position",parseInt(t(this).offset().top))}),e.renderAfter()}).error(function(){console.log("Ajax Request Error!")})};var f=function(e){this.attr=e,this.root=t("<div>",{id:"double-select-view"}),this.leftSelectView=new c({id:"left","class":"am-plugin-actionbar-container-l",offset:e.offset}),this.rightSelectView=new c({id:"right","class":"am-plugin-actionbar-container-r",offset:e.offset}),this.leftSelectView.root.appendTo(this.root),this.rightSelectView.root.appendTo(this.root),this.view=null,this.config=null;var o=this;this.clearSelectedContext=function(){o.leftSelectView.clearSelectedContext(),o.rightSelectView.clearSelectedContext()}};f.prototype.displaySetting=function(e){var o=t(e).height()-this.attr.offset;this.leftSelectView.root.css({height:o}),this.rightSelectView.root.css({height:o});var a=this.aplhabetBar.alphabetBarView;a.renderTo(e,o)},f.prototype.setAplhabetBar=function(t){this.aplhabetBar=t,this.aplhabetBar.alphabetBarView.bindSelectView(this)},f.prototype.selectedAllOff=function(e){t("li",e).css("backgroundColor","#fff"),t("li",e).data("select",!1),this.data=null,this.nodeData=null},f.prototype.selectedOn=function(e){return t(e).css("backgroundColor","#ececec"),t(e).data("select",!0),t(e).data("object")},f.prototype.selectedOff=function(e,o){return t("li",o).css("backgroundColor","#fff"),t(e).data("select",!1),null},f.prototype.renderAfter=function(){var e=this;this.rootIScroll=new IScroll("#"+this.leftSelectView.attr.id,{click:!0}),this.view.iscrolls.push(this.rootIScroll),t.touchEvent("[data-object]","#left_context",{start:function(t){e.selectedAllOff("#left_context"),e.data=e.selectedOn(t.target,e.data)},move:function(t){e.data=e.selectedOff(t.target,"#left_context")},end:function(t){e.onloadNodeData(e.data.dataType)}})},f.prototype.renderNodeAfter=function(){var e=this;this.nodeIScroll=new IScroll("#"+this.rightSelectView.attr.id,{click:!0}),this.view.iscrolls.push(this.nodeIScroll),t.touchEvent("[data-object]","#warp_alphabet_node",{start:function(t){e.selectedAllOff("#warp_alphabet_node"),e.nodeData=e.selectedOn(t.target)},move:function(t){e.nodeData=e.selectedOff(t.target,"#warp_alphabet_node")},end:function(t){}})},f.prototype.formatNodeApiUrl=function(){var t=this.config.url.node;this.nodeUrl=t.apiUrl,this.rootPropertys=t.rootPropertys;for(var e="?",o=0;o<t.rootPropertys.length;o++)for(var a in t.rootPropertys[o])e+="&"+a+"={"+a+"}";this.nodeUrl+=e},f.prototype.onloadData=function(){var e=this,o=null;e.config.url&&"string"==typeof e.config.url&&(o=e.config.url),e.config.url&&"object"==typeof e.config.url&&(o=e.config.url.root.apiUrl),t.getJSON(o+"?ver="+new Date,null,function(o){for(var a=0;a<o.form.length;a++){var r=t("<div>",{id:"warp_alphabet_"+o.form[a].code,"class":"warp_alphabet_mark"}),i=t("<div class='warp_alphabet_title'><li><h2>"+o.form[a].code+"</h2></li></div>");t(i).appendTo(r);var n=t("<ul>",{id:"warp_u_"+o.form[a].code,"class":"warp_context"});if(o.form[a].p2pcb)for(var l=0;l<o.form[a].p2pcb.length;l++){var s=t("<li>",{"data-object":JSON.stringify(o.form[a].p2pcb[l]),"data-select":!1});s.text(o.form[a].p2pcb[l].name),s.appendTo(n)}t(n).appendTo(r),t(r).appendTo(e.leftSelectView.selectedContext)}t.each(t(".warp_alphabet_mark"),function(){t(this).attr("data-position",parseInt(t(this).offset().top))}),e.formatNodeApiUrl(),e.renderAfter()}).error(function(){console.log("Ajax Request Error!")})},f.prototype.onloadNodeData=function(){for(var e=this,o=this.nodeUrl+"",a=0;a<this.rootPropertys.length;a++)for(var r in this.rootPropertys[a])o=o.replace("{"+r+"}",this.data[this.rootPropertys[a][r]]);e.rightSelectView.selectedContext.html(""),t.getJSON(o,null,function(o){var a=t("<div>",{id:"warp_alphabet_node","class":"warp_alphabet_mark"}),r=t("<ul>",{id:"warp_u_node","class":"warp_context"}),i=t("<li>",{"data-object":"all","data-select":!0});i.text("全部"),i.css("backgroundColor","#ececec"),i.appendTo(r);for(var n=0;n<o.form.length;n++){var l=t("<li>",{"data-object":JSON.stringify(o.form[n]),"data-select":!1});l.text(o.form[n].name),l.appendTo(r)}r.appendTo(a),a.appendTo(e.rightSelectView.selectedContext),e.renderNodeAfter()}).error(function(){console.log("Ajax Request Error!")})};var u=function(e){this.root=t("<div>",{"class":"am-plugin-actionbar-container-b am-vertical-align  am-cf"}),this.root.css(e),this.button=t("<button>",{type:"button",id:"confirmButton","class":"am-btn am-btn-danger"}),this.button.text("确认"),this.button.appendTo(this.root)};return u.prototype.submit=function(e,o,a){t(this.button).unbind("click").bind("click",function(t){var r={rootValue:o.data,nodeValue:o.nodeData};e(r),a.destroyAction()})},n.prototype.initConfiguration=function(t){},n.prototype.onActivate=function(t){},a.extend({id:"ActionBarView",model:new s,attrs:{template:"assets/template/widget/action-bar.tpl?ver="+(new Date).getTime()},events:{"touchend [action-selectview-event]":"onSelectView","touchend [action-button-event]":"onButton"},actionNodes:{},setup:function(){for(var e=this,o=e.getAttr("parentNode"),a=(e.getAttr("type"),e.getAttr("data"),e.getAttr("actions")),r=0;r<a.length;r++)switch(a[r].type){case"SelectView":e.selectView(a[r]);break;case"DoubleSelectView":e.doubleSelectView(a[r]);break;case"AplhabetSelectView":e.aplhabetSelectView(a[r]);break;case"AplhabetDoubleSelectView":e.aplhabetDoubleSelectView(a[r]);break;case"Button":e.actionButton(a[r])}e.parentNodePosition={width:t(o).width(),height:t(o).height(),top:t(o).offset().top,left:t(o).offset().left,right:t(o).offset().right,bottom:t(o).offset().bottom,screen:{width:window.screen.width,height:window.screen.height}},document.addEventListener("touchmove",function(t){null!=e.activeActionItem&&t.preventDefault()},!1)},parentNodePosition:{width:0,height:0,top:0,left:0,right:0,bottom:0},activeActionItem:null,elContainer:new Array,iscrolls:new Array,base:function(t){var e=this,o=e.getModel("data");o&&""!=o||(o=new Array),o.push(t),e.setModel("data",o)},selectView:function(t){var e=this;e.base(t);var o=t.id;t.type;e.actionNodes[o]=null;var a=new c({id:"select-container","class":"am-plugin-actionbar-container-full",offset:146});a.initConfiguration(t,e);var r={selectView:a};e.actionNodes[o]=r},doubleSelectView:function(t){var e=this;e.base(t);var o=t.id;t.type;e.actionNodes[o]=null;var a=new d({offset:146});a.initConfiguration(t,e);var r={selectView:a};e.actionNodes[o]=r},aplhabetSelectView:function(t){var e=this;e.base(t);var o=t.id;t.type;e.actionNodes[o]=null;var a=new p({id:"select-container","class":"am-plugin-actionbar-container-full",offset:146});a.view=e,a.config=t,a.setAplhabetBar(new i({}));var r={selectView:a};e.actionNodes[o]=r},aplhabetDoubleSelectView:function(t){var e=this;e.base(t);var o=t.id;t.type;e.actionNodes[o]=null;var a=new f({offset:146});a.view=e,a.config=t,a.setAplhabetBar(new i({}));var r={selectView:a};e.actionNodes[o]=r},actionButton:function(t){var e=this;e.base(t);var o=t.id;t.type;e.actionNodes[o]=null;var a={selectView:{config:t}};e.actionNodes[o]=a},popup:function(){var e=this,o=t("<div>",{"class":"am-plugin-popup"});t(o).appendTo(document.body),e.banScrollTouchmove(o),e.elContainer.push(o)},showActionBarContainer:function(){var e=this,o=t("<div>",{"class":"am-plugin-actionbar-container",id:"action-bar-container"});t(o).appendTo(document.body),e.createChildContainer(o),e.elContainer.push(o)},createChildContainer:function(t){var e=this,o=e.activeActionItem.data("id"),a=(e.activeActionItem.data("type"),e.actionNodes[o]);a.selectView.displaySetting(t),a.selectView.clearSelectedContext(),a.selectView.root.appendTo(t),a.selectView.onloadData();var r=new u({bottom:86});a.selectView.config.submit&&r.submit(a.selectView.config.submit,a.selectView,e),r.root.appendTo(t)},banScrollTouchmove:function(e){t(e).bind("touchmove",function(t){t.preventDefault()},!1)},destroyAction:function(){var e=this,o=e.activeActionItem;t(o).attr("status","0"),t(o).removeClass("am-plugin-actionbar-active");for(var a in e.elContainer)t(e.elContainer[a]).remove();for(var a in e.iscrolls)e.iscrolls[a].destroy();e.elContainer=new Array,e.iscrolls=new Array,e.activeActionItem=null},destroyActiveAction:function(e){var o=this,a=t(o.activeActionItem).attr("status"),r=t(e).data("id"),i=t(o.activeActionItem).data("id");return null!=o.activeActionItem?(o.destroyAction(),r==i&&"1"==a?!1:!0):!0},activeAction:function(){var e=this;t(e.activeActionItem).addClass("am-plugin-actionbar-active"),t(e.activeActionItem).attr("status","1"),e.showActionBarContainer()},onSelectView:function(t){this.activeView(t.target)},setActive:function(e){var o=this,a=o.actionNodes[e],r=t("div[data-id="+a.selectView.config.id+"]").get(0);"Button"===a.selectView.config.type?o.activeButton(r):o.activeView(r)},onButton:function(t){this.activeButton(t.target)},activeButton:function(e){var o=this,a=t(e),r=t(a).attr("status"),i=o.destroyActiveAction(a);if(i){switch(o.activeActionItem=a,r){case"0":t(a).addClass("am-plugin-actionbar-active"),t(a).attr("status","1");break;case"1":t(a).removeClass("am-plugin-actionbar-active"),t(a).attr("status","0")}var n=t(a).data("id"),l=o.actionNodes[n].selectView.config;l.submit&&l.submit()}},activeView:function(e){var o=this,a=t(e),r=t(a).attr("status"),i=o.destroyActiveAction(a);if(i)switch(o.activeActionItem=a,r){case"0":o.activeAction();break;case"1":o.destroyAction()}}})});