!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var i=t("jquery"),n=t("lodash"),r=t("backbone"),s=t("backbone.view"),a=t("template");return e(i,n,r,s,a)}):define.cmd&&define(function(t,i,n){var r=t("jquery"),s=t("lodash"),a=t("backbone"),h=t("backbone.view"),o=t("template");return e(r,s,a,h,o)}):t.HeaderNavigate=e(t.HeaderNavigate)}(this,function(t,e,i,n,r){"use strict";function s(){this.title=this.left=this.right=null,this.$header=this.$left=this.$right=this.$title=null,this.view=null,this.SideFrameView=null}s.prototype.createHeader=function(){var e=this;if(this.$left=t("<div>",{"class":"am-plugin-header-left"}),this.left)if(this.left.iconClass&&(this.$leftIcon=t("<i>",{"class":""+this.left.iconClass}),this.$leftIcon.appendTo(this.$left)),this.left.isSideFrameView===!0)var i=setInterval(function(){document.parentWindow&&(document.parentWindow.SideFrameView.bindClose(e.$left),e.SideFrameView=document.parentWindow.SideFrameView,clearInterval(i))},300);else if(this.left.event)for(var n in this.left.event)t(this.$left).bind(n,this.left.event[n]);if(this.$right=t("<div>",{"class":"am-plugin-header-right"}),this.right&&(this.right.iconClass&&(this.$rightIcon=t("<i>",{"class":""+this.right.iconClass}),this.$rightIcon.appendTo(this.$right)),this.right.title&&this.$right.text(this.right.title),this.right.event))for(var n in this.right.event)t(this.$right).bind(n,this.right.event[n]);this.$title=t("<h1>",{"class":"am-plugin-header-title"}),this.$title.text(this.title),this.$title.appendTo(t(".am-plugin-header",document.body)),this.$right.appendTo(t(".am-plugin-header",document.body)),this.$left.appendTo(t(".am-plugin-header",document.body)),this.style&&t(".am-plugin-header",document.body).css(this.style)},s.prototype.initConfiguration=function(t){this.view=t,this.title=t.getAttr("title"),this.style=t.getAttr("style"),this.left=t.getAttr("left"),this.right=t.getAttr("right"),this.createHeader()},s.prototype.registerNative=function(t,e){var i=this,n=i.findMainWindow(window);n[t]=e},s.prototype.findMainWindow=function(t){var e=this,i=t.document,n=i.parentWindow,r=null;return r=n?e.findMainWindow(n):t},s.prototype.closeFrame=function(){var t=this.SideFrameView;t&&(t.executeTrigger(),t.close())};var a=i.Model.extend({idAttribute:"",defaults:{}});return n.extend({id:"",model:new a,attrs:{parentNode:null},events:{},registerNative:function(t,e){var i=this.getAttr("headerNavigate");i.registerNative(t,e)},closeFrame:function(){var t=this.getAttr("headerNavigate");t.closeFrame()},setup:function(){var t=this,e=new s;e.initConfiguration(t),t.setAttr("headerNavigate",e),document.addEventListener("touchmove",function(t){t.preventDefault()},!1)}})});