!function(t,e){"use strict";"function"==typeof define?define.amd?define(function(t){var a=t("jquery"),i=t("lodash"),o=t("backbone"),p=t("backbone.view"),n=t("template");return e(a,i,o,p,n)}):define.cmd&&define(function(t,a,i){var o=t("jquery"),p=t("lodash"),n=t("backbone"),s=t("backbone.view"),l=t("template");return e(o,p,n,s,l)}):t.AlphabetBar=e(t.AlphabetBar)}(this,function(t,e,a,i,o){"use strict";var p=function(){this.root=t("<div>",{id:"alphabetNavBar","class":"am-plugin-alphabet-nav"}),this.backgroundView=t("<div>",{"class":"am-plugin-alphabet-nav-bg"}),this.alphabetBox=t("<ul>",{"class":""}),this.tip=t("<div>",{"class":"am-plugin-alphabet-nav-tip"}),this.alphabetText=null,this.backgroundView.appendTo(this.root),this.alphabetBox.appendTo(this.root),this.selectView=null};p.prototype.putAlphabet=function(e){var a=t("<li>",{});a.text(e),a.appendTo(this.alphabetBox)},p.prototype.positionHeight=function(t){t-=10,this.root.css({height:t}),this.backgroundView.css({height:t}),this.alphabetBox.css({height:t}),this.alphabetItemHeight=t/26,this.alphabetBox.find("li").css({height:this.alphabetItemHeight})},p.prototype.bindSelectView=function(t){this.selectView=t},p.prototype.positionAlphabetOffsetY=function(){var e=this;t.each(t("li",this.alphabetBox),function(){for(var a=parseInt(t(this).offset().top),i=a+",",o=parseInt(e.alphabetItemHeight),p=1;o>=p;p++)i+=a+p+",";t(this).attr("data-position",i)})},p.prototype.displaySetting=function(){this.tip.removeClass("am-plugin-alphabet-nav-tip-active"),this.tip.removeClass("am-plugin-alphabet-nav-tip-destroy")},p.prototype.renderTo=function(t,e){this.positionHeight(e),this.displaySetting(),this.root.appendTo(t),this.tip.appendTo(t),this.positionAlphabetOffsetY(),this.onTouchStart(),this.onTouchEnd(),this.onSwipe()},p.prototype.onTouchStart=function(){var e=this;t("li",e.alphabetBox).unbind("touchstart").bind("touchstart",function(a){t(e.tip).text(t(a.target).text()),t(e.tip).addClass("am-plugin-alphabet-nav-tip-active"),t(e.tip).removeClass("am-plugin-alphabet-nav-tip-destroy");var i=t("#warp_alphabet_"+t(a.target).text());e.selectView.rootIScroll.scrollToElement(t(i).get(0),10,0,-5)})},p.prototype.onTouchEnd=function(){var e=this;t("li",e.alphabetBox).unbind("touchend").bind("touchend",function(a){t(e.tip).addClass("am-plugin-alphabet-nav-tip-destroy"),t(e.tip).removeClass("am-plugin-alphabet-nav-tip-active")})},p.prototype.onSwipe=function(){var e=this,a=parseInt(e.root.offset().top);t("li",e.root).swipe({swipeStatus:function(i,o,p,n,s,l){var h=parseInt(i.touches[0].pageY)-20,r=t("li[data-position^="+h+"]",e.alphabetBox);if(r&&!(a>h)&&""!=r.text()){var c=r.text();if(e.alphabetText!=c){e.alphabetText=c,t("li",e.root).css("color","#AAA"),t(r).css("color","#E60012"),e.tip.text(c);var u=t("#warp_alphabet_"+e.alphabetText);e.selectView.rootIScroll.scrollToElement(t(u).get(0),10,0,-5)}}},threshold:0,maxTimeThreshold:6e4,fingers:t.fn.swipe.fingers.ALL})};var n=a.Model.extend({idAttribute:"AlphabetBar",defaults:{apiUrl:""}});return i.extend({id:"AlphabetBarView",model:new n,attrs:{template:null},events:{},alphabet:["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],alphabetBarView:null,alphabetText:"#",setup:function(){var t=this;t.getAttr("parentNode"),t.getAttr("type"),t.getAttr("data");t.structure()},structure:function(){var e=this;e.alphabetBarView=new p;for(var a=0;a<e.alphabet.length;a++)e.alphabetBarView.putAlphabet(e.alphabet[a]);e.alphabetTip=t("<div>",{"class":"am-plugin-alphabet-nav-tip"}),e.alphabetTip.text("#")}})});